<!DOCTYPE html>
<html lang="en-us">
<head>
    

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-177198277-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-177198277-1');
    </script>


    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="toeb&#39;s Blog">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://toeb.github.io//images/carbon.png">
    <meta property="twitter:image" content="https://toeb.github.io//images/carbon.png" />
    

    
    <meta name="title" content="cmakepp: reflecting and manipulating CMakeLists" />
    <meta property="og:title" content="cmakepp: reflecting and manipulating CMakeLists" />
    <meta property="twitter:title" content="cmakepp: reflecting and manipulating CMakeLists" />
    

    
    <meta name="description" content="">
    <meta property="og:description" content="" />
    <meta property="twitter:description" content="" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="thetoeb, toeb, blog, programming">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>cmakepp: reflecting and manipulating CMakeLists-Toeb Blog</title>

    <link rel="canonical" href="/post/cmakeppreflectingandmanipulatingcmakelists/">

    <link rel="stylesheet" href="/css/iDisqus.min.css"/>
	
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">
    
    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    
    

    
    
    <script src="/js/jquery.min.js"></script>
    
    
    <script src="/js/bootstrap.min.js"></script>
    
    
    <script src="/js/hux-blog.min.js"></script>

    
    

</head>



<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">toeb&#39;s Blog</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                        
                        <li>
                            <a href="/categories/c">c#</a>
                        </li>
                        
                        <li>
                            <a href="/categories/cmake">cmake</a>
                        </li>
                        
                    
                    
		    
                        <li><a href="/top/about/">ABOUT</a></li>
                    

                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/images/carbon.png')
    }
</style>
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                    </div>
                    <h1>cmakepp: reflecting and manipulating CMakeLists</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by 
                        
                                toeb&#39;s Blog
                         
                        on 
                        Thursday, March 19, 2015
                        
                        
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                post-container">

                
                <p>The basic CMakeLists.txt files for cmake based projects are usually very simple. Their manipulation lends itself to be automated and for this purpose I developed a parser for cmake script which allows you to manipulate it programatically from within cmake itself. On top of the cmake script parser I generated utility functions which allow you to manipulate CMakeLists.txt files while still allowing you to manually working on them. This functionality is wrapped by a command line interface which I present to you in this post. You can find this part of cmakepp here. Feel free to try and please give me feedback if you like it or find any bugs.</p>
<p>With this sample I want to show you how you can manipulate a CMakeList.txt using the command line interface cml (an alias for your shell of choice which is installed when you install cmakepp). The command line interface simply wraps functions which you could also use from cmake directly.</p>
<h2 id="step-1--starting-from-scratch">Step 1 – Starting from Scratch</h2>
<p>The first thing to do is to create an initial CMakeLists.txt file in the directory of your project.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmake" data-lang="cmake"><span style="color:#75715e"># create a new directory
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">./&gt;</span> <span style="color:#960050;background-color:#1e0010">mkdir</span> <span style="color:#960050;background-color:#1e0010">my_project
</span><span style="color:#960050;background-color:#1e0010">./&gt;</span> <span style="color:#960050;background-color:#1e0010">cd</span> <span style="color:#960050;background-color:#1e0010">my_project
</span><span style="color:#960050;background-color:#1e0010">my_project/&gt;</span> <span style="color:#960050;background-color:#1e0010">cml</span> <span style="color:#960050;background-color:#1e0010">init</span> <span style="color:#960050;background-color:#1e0010">
</span></code></pre></div><p>These commands result in a new CMakeLists file in the current directory. The projects name is derived by taking the parent directory’s name. As you can see the code is just vanilla cmake and you can modify it manually as ever you see fit.</p>
<p>CMakeLists.txt:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmake" data-lang="cmake">cmake_minimum_required(<span style="color:#e6db74">VERSION</span> <span style="color:#e6db74">3.2.1</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>project(<span style="color:#e6db74">my_project</span>)<span style="color:#960050;background-color:#1e0010">
</span></code></pre></div><h2 id="step-2--adding-a-target">Step 2 – Adding a target</h2>
<p>The first thing you might want to do is to add a target. Let’s say we want a library called my_lib and an executable called my_exe.</p>
<pre><code># add the target 
my_project/&gt; cml target add my_lib
my_project/&gt; cml target add my_exe executable
</code></pre><p>Now you can see the scaffolding for a cmake library and executable target inside the CMakeLists.txt. You might have also noticed that what was generated is not a valid CMakeLists.txt because there are no source files specified for the lib and the exe. However this only causes an error if you generate it. So we need to add source files which leads us to the next section.</p>
<p>CMakeLists.txt:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmake" data-lang="cmake">cmake_minimum_required(<span style="color:#e6db74">VERSION</span> <span style="color:#e6db74">3.2.1</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>project(<span style="color:#e6db74">my_project</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>add_library(<span style="color:#e6db74">my_lib</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>add_executable(<span style="color:#e6db74">my_exe</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">Step</span> <span style="color:#960050;background-color:#1e0010">3</span> <span style="color:#960050;background-color:#1e0010">–</span> <span style="color:#960050;background-color:#1e0010">Adding</span> <span style="color:#960050;background-color:#1e0010">source</span> <span style="color:#960050;background-color:#1e0010">files,</span> <span style="color:#960050;background-color:#1e0010">include</span> <span style="color:#960050;background-color:#1e0010">directories</span> <span style="color:#960050;background-color:#1e0010">and</span> <span style="color:#960050;background-color:#1e0010">dependencies
</span><span style="color:#960050;background-color:#1e0010">Using</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">command</span> <span style="color:#960050;background-color:#1e0010">line</span> <span style="color:#960050;background-color:#1e0010">tool</span> <span style="color:#960050;background-color:#1e0010">you</span> <span style="color:#960050;background-color:#1e0010">can</span> <span style="color:#960050;background-color:#1e0010">easily</span> <span style="color:#960050;background-color:#1e0010">add</span> <span style="color:#960050;background-color:#1e0010">files,</span> <span style="color:#960050;background-color:#1e0010">folders</span> <span style="color:#960050;background-color:#1e0010">and</span> <span style="color:#960050;background-color:#1e0010">values</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">targets.</span> <span style="color:#960050;background-color:#1e0010">The</span> <span style="color:#960050;background-color:#1e0010">corresponding</span> <span style="color:#960050;background-color:#1e0010">properties</span> <span style="color:#960050;background-color:#1e0010">are</span> <span style="color:#960050;background-color:#1e0010">automatically</span> <span style="color:#960050;background-color:#1e0010">created</span> <span style="color:#960050;background-color:#1e0010">or</span> <span style="color:#960050;background-color:#1e0010">removed.</span> <span style="color:#960050;background-color:#1e0010">Be</span> <span style="color:#960050;background-color:#1e0010">sure</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">add</span> <span style="color:#960050;background-color:#1e0010">at</span> <span style="color:#960050;background-color:#1e0010">least</span> <span style="color:#960050;background-color:#1e0010">something</span> <span style="color:#960050;background-color:#1e0010">as</span> <span style="color:#960050;background-color:#1e0010">sources.
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## add source files to the my_lib target from a sub-directory (the files have to exist) 
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">my_project/src/my_lib/&gt;</span> <span style="color:#960050;background-color:#1e0010">cml</span> <span style="color:#960050;background-color:#1e0010">target</span> <span style="color:#960050;background-color:#1e0010">my_lib</span> <span style="color:#960050;background-color:#1e0010">sources</span> <span style="color:#960050;background-color:#1e0010">append</span> <span style="color:#960050;background-color:#1e0010">my_lib.cpp
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## add source file from another directory using a glob expression 
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">my_project/includes/my_lib_inc/&gt;</span> <span style="color:#960050;background-color:#1e0010">cml</span> <span style="color:#960050;background-color:#1e0010">target</span> <span style="color:#960050;background-color:#1e0010">my_lib</span> <span style="color:#960050;background-color:#1e0010">sources</span> <span style="color:#960050;background-color:#1e0010">append</span> <span style="color:#960050;background-color:#1e0010">my_lib*.h
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## add source file to my_exe 
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">my_project/&gt;</span> <span style="color:#960050;background-color:#1e0010">cml</span> <span style="color:#960050;background-color:#1e0010">target</span> <span style="color:#960050;background-color:#1e0010">my_exe</span> <span style="color:#960050;background-color:#1e0010">sources</span> <span style="color:#960050;background-color:#1e0010">append</span> <span style="color:#960050;background-color:#1e0010">src/main.cpp
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## add an include directory to the my_lib target
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">my_project/include/&gt;</span> <span style="color:#960050;background-color:#1e0010">cml</span> <span style="color:#960050;background-color:#1e0010">target</span> <span style="color:#960050;background-color:#1e0010">my_lib</span> <span style="color:#960050;background-color:#1e0010">includes</span> <span style="color:#960050;background-color:#1e0010">append</span> <span style="color:#960050;background-color:#1e0010">my_lib_inc
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## add my_lib dependency to my_exe
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">my_project/include/&gt;</span> <span style="color:#960050;background-color:#1e0010">cml</span> <span style="color:#960050;background-color:#1e0010">target</span> <span style="color:#960050;background-color:#1e0010">my_exe</span> <span style="color:#960050;background-color:#1e0010">links</span> <span style="color:#960050;background-color:#1e0010">append</span> <span style="color:#960050;background-color:#1e0010">my_lib
</span><span style="color:#960050;background-color:#1e0010">All</span> <span style="color:#960050;background-color:#1e0010">these</span> <span style="color:#960050;background-color:#1e0010">modifications</span> <span style="color:#960050;background-color:#1e0010">culminate</span> <span style="color:#960050;background-color:#1e0010">in</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">CMakelists.txt</span> <span style="color:#960050;background-color:#1e0010">as</span> <span style="color:#960050;background-color:#1e0010">follows:</span> <span style="color:#960050;background-color:#1e0010">CMakeLists.txt:
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>cmake_minimum_required(<span style="color:#e6db74">VERSION</span> <span style="color:#e6db74">3.2.1</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>project(<span style="color:#e6db74">my_project</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>add_library(<span style="color:#e6db74">my_lib</span>
  <span style="color:#e6db74">src/my_lib/my_lib.cpp</span>
  <span style="color:#e6db74">includes/my_lib_inc/my_lib1.h</span>
  <span style="color:#e6db74">includes/my_lib_inc/my_lib2.h</span>
)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>target_include_directories(<span style="color:#e6db74">my_lib</span> <span style="color:#e6db74">PUBLIC</span> <span style="color:#e6db74">include/my_lib_inc</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>add_executable(<span style="color:#e6db74">my_exe</span> <span style="color:#e6db74">src/main.cpp</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>target_link_libraries(<span style="color:#e6db74">my_exe</span> <span style="color:#e6db74">my_lib</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">Now</span> <span style="color:#960050;background-color:#1e0010">we</span> <span style="color:#960050;background-color:#1e0010">have</span> <span style="color:#960050;background-color:#1e0010">a</span> <span style="color:#960050;background-color:#1e0010">working</span> <span style="color:#960050;background-color:#1e0010">CMake</span> <span style="color:#960050;background-color:#1e0010">project</span> <span style="color:#960050;background-color:#1e0010">with</span> <span style="color:#960050;background-color:#1e0010">two</span> <span style="color:#960050;background-color:#1e0010">targets</span> <span style="color:#960050;background-color:#1e0010">of</span> <span style="color:#960050;background-color:#1e0010">which</span> <span style="color:#960050;background-color:#1e0010">one</span> <span style="color:#960050;background-color:#1e0010">depends</span> <span style="color:#960050;background-color:#1e0010">on</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">other.</span> <span style="color:#960050;background-color:#1e0010">There</span> <span style="color:#960050;background-color:#1e0010">are</span> <span style="color:#960050;background-color:#1e0010">more</span> <span style="color:#960050;background-color:#1e0010">possibilities</span> <span style="color:#960050;background-color:#1e0010">than</span> <span style="color:#960050;background-color:#1e0010">appending</span> <span style="color:#960050;background-color:#1e0010">values</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">targets</span> <span style="color:#960050;background-color:#1e0010">properties.</span> <span style="color:#960050;background-color:#1e0010">You</span> <span style="color:#960050;background-color:#1e0010">can</span> <span style="color:#960050;background-color:#1e0010">also</span> <span style="color:#960050;background-color:#1e0010">remove,</span> <span style="color:#960050;background-color:#1e0010">set,</span> <span style="color:#960050;background-color:#1e0010">filter,</span> <span style="color:#960050;background-color:#1e0010">clear</span> <span style="color:#960050;background-color:#1e0010">them</span> <span style="color:#960050;background-color:#1e0010">but</span> <span style="color:#960050;background-color:#1e0010">alas</span> <span style="color:#960050;background-color:#1e0010">their</span> <span style="color:#960050;background-color:#1e0010">is</span> <span style="color:#960050;background-color:#1e0010">still</span> <span style="color:#960050;background-color:#1e0010">much</span> <span style="color:#960050;background-color:#1e0010">functionality</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">be</span> <span style="color:#960050;background-color:#1e0010">added.
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">Step</span> <span style="color:#960050;background-color:#1e0010">4</span> <span style="color:#960050;background-color:#1e0010">–</span> <span style="color:#960050;background-color:#1e0010">Renaming</span> <span style="color:#960050;background-color:#1e0010">Targets</span> <span style="color:#960050;background-color:#1e0010">and</span> <span style="color:#960050;background-color:#1e0010">Changing</span> <span style="color:#960050;background-color:#1e0010">their</span> <span style="color:#960050;background-color:#1e0010">Type
</span><span style="color:#960050;background-color:#1e0010">Renaming</span> <span style="color:#960050;background-color:#1e0010">targets</span> <span style="color:#960050;background-color:#1e0010">and</span> <span style="color:#960050;background-color:#1e0010">changing</span> <span style="color:#960050;background-color:#1e0010">their</span> <span style="color:#960050;background-color:#1e0010">type</span> <span style="color:#960050;background-color:#1e0010">is</span> <span style="color:#960050;background-color:#1e0010">also</span> <span style="color:#960050;background-color:#1e0010">a</span> <span style="color:#960050;background-color:#1e0010">breeze</span> <span style="color:#960050;background-color:#1e0010">with</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">reflection</span> <span style="color:#960050;background-color:#1e0010">tool.</span> <span style="color:#960050;background-color:#1e0010">Let’s</span> <span style="color:#960050;background-color:#1e0010">rename</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">change</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">type</span> <span style="color:#960050;background-color:#1e0010">my_exe</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">library</span> <span style="color:#960050;background-color:#1e0010">and</span> <span style="color:#960050;background-color:#1e0010">rename</span> <span style="color:#960050;background-color:#1e0010">it</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">the_executable:
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">my_project/&gt;</span> <span style="color:#960050;background-color:#1e0010">cml</span> <span style="color:#960050;background-color:#1e0010">target</span> <span style="color:#960050;background-color:#1e0010">my_exe</span> <span style="color:#960050;background-color:#1e0010">rename</span> <span style="color:#960050;background-color:#1e0010">the_executable
</span><span style="color:#960050;background-color:#1e0010">my_project/&gt;</span> <span style="color:#960050;background-color:#1e0010">cml</span> <span style="color:#960050;background-color:#1e0010">target</span> <span style="color:#960050;background-color:#1e0010">the_executable</span> <span style="color:#960050;background-color:#1e0010">type</span> <span style="color:#960050;background-color:#1e0010">library
</span><span style="color:#960050;background-color:#1e0010">CMakeLists.txt:
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>cmake_minimum_required(<span style="color:#e6db74">VERSION</span> <span style="color:#e6db74">3.2.1</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>project(<span style="color:#e6db74">my_project</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>add_library(<span style="color:#e6db74">my_lib</span>
  <span style="color:#e6db74">src/my_lib/my_lib.cpp</span>
  <span style="color:#e6db74">includes/my_lib_inc/my_lib1.h</span>
  <span style="color:#e6db74">includes/my_lib_inc/my_lib2.h</span>
)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>target_include_directories(<span style="color:#e6db74">my_lib</span> <span style="color:#e6db74">PUBLIC</span> <span style="color:#e6db74">include/my_lib_inc</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>add_library(<span style="color:#e6db74">the_executable</span> <span style="color:#e6db74">src/main.cpp</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>target_link_libraries(<span style="color:#e6db74">the_executable</span> <span style="color:#e6db74">my_lib</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">Step</span> <span style="color:#960050;background-color:#1e0010">5</span> <span style="color:#960050;background-color:#1e0010">–</span> <span style="color:#960050;background-color:#1e0010">Generating</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">Project
</span><span style="color:#960050;background-color:#1e0010">This</span> <span style="color:#960050;background-color:#1e0010">step</span> <span style="color:#960050;background-color:#1e0010">is</span> <span style="color:#960050;background-color:#1e0010">just</span> <span style="color:#960050;background-color:#1e0010">for</span> <span style="color:#960050;background-color:#1e0010">completeness</span> <span style="color:#960050;background-color:#1e0010">sake.</span> <span style="color:#960050;background-color:#1e0010">Do</span> <span style="color:#960050;background-color:#1e0010">as</span> <span style="color:#960050;background-color:#1e0010">you</span> <span style="color:#960050;background-color:#1e0010">would</span> <span style="color:#960050;background-color:#1e0010">normally</span> <span style="color:#960050;background-color:#1e0010">do</span> <span style="color:#960050;background-color:#1e0010">with</span> <span style="color:#960050;background-color:#1e0010">any</span> <span style="color:#960050;background-color:#1e0010">cmake</span> <span style="color:#960050;background-color:#1e0010">project.
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">my_project/&gt;</span> <span style="color:#960050;background-color:#1e0010">mkdir</span> <span style="color:#960050;background-color:#1e0010">build
</span><span style="color:#960050;background-color:#1e0010">my_project/&gt;</span> <span style="color:#960050;background-color:#1e0010">cd</span> <span style="color:#960050;background-color:#1e0010">build
</span><span style="color:#960050;background-color:#1e0010">my_project/build/&gt;</span> <span style="color:#960050;background-color:#1e0010">cmake</span> <span style="color:#960050;background-color:#1e0010">..
</span><span style="color:#960050;background-color:#1e0010">my_project/build/&gt;</span> <span style="color:#960050;background-color:#1e0010">cmake</span> <span style="color:#960050;background-color:#1e0010">--build</span> <span style="color:#960050;background-color:#1e0010">.
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## show that the project generated correctly (in my case for Visual Studio)
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">my_project/build/&gt;</span> <span style="color:#960050;background-color:#1e0010">ls</span> <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">[
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/ALL_BUILD.vcxproj&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/ALL_BUILD.vcxproj.filters&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/CMakeCache.txt&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/CMakeFiles&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/cmake_install.cmake&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/Debug&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/my_lib.dir&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/my_lib.vcxproj&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/my_lib.vcxproj.filters&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/my_project.sln&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/the_executable.dir&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/the_executable.vcxproj&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/the_executable.vcxproj.filters&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/Win32&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/ZERO_CHECK.vcxproj&#34;,
</span><span style="color:#960050;background-color:#1e0010"></span> <span style="color:#960050;background-color:#1e0010">&#34;./my_project/build/ZERO_CHECK.vcxproj.filters&#34;
</span><span style="color:#960050;background-color:#1e0010">]
</span></code></pre></div><p>Now the project is ready for use.</p>
<h2 id="conclusion">Conclusion</h2>
<p>As you can see I have added a lot of functionality to cmakepp which allows you to use cmake script reflection to modify cmake code. Of course there are Caveats – like speed: A command call can take upwards of a second or 2 for a normal sized CMakeLists.txt because the token parser and the search procedures all are O(n) (n being the number of tokens parsed).</p>
<p>This functionality is very interesting to me because programatically altering cmake files will allow you (and me) to create project scaffolders and generators (like yeoman for web/javascript) which give you an easy start with any new cmake based project and later allows you to simply add files, target etc. Since it is written in pure cmake this is platform independent and could even be used by IDEs to update the CMakeLists files automatically without destroying custom code. The final destination for this is to have generator templates which scaffold your whole project and create standard/vanilla cmake files. Especially combination with my/a package manager this can become very powerful. All functionality described here and much more can also be used from within cmake itself.</p>
<p>If you are more interested in the available commands go to the documentation of cmakelists_cli in the github repository.</p>
<p>Future development will allow more complete and easier use of the command line client – more powerful commands, automatic deductions, formatting, …</p>
<p>Thanks for reading my Post and feel free to gift me with up votes or critique or issues or ….</p>


                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/cmakeppheterogenouspackagesearchandretrieval/" data-toggle="tooltip" data-placement="top" title="Heterogeneous Package Search and Retrieval in CMake">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/usefulextensionsforcmake/" data-toggle="tooltip" data-placement="top" title="Useful extensions for CMake">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>

                
<div id="disqus-comment"></div>



<script src="https://utteranc.es/client.js"
repo="toeb/devblog"
issue-term="pathname"
label="comment"
theme="github-light"
crossorigin="anonymous"
async>
</script>





            </div>
            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                    </div>
                </section>
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                   <li>
                       <a href='' rel="alternate" type="application/rss+xml" title="toeb&#39;s Blog" >
                           <span class="fa-stack fa-lg">
                               <i class="fa fa-circle fa-stack-2x"></i>
                               <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
                   
                    
                    <li>
                        <a href="mailto:redacted@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    

                    

		    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/toeb">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/tobias-becker-a64475a3/">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    <li>
                        <a target="_blank" href="https://stackoverflow.com/users/1229468/toeb">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
            
                    
                    <li>
                        <a target="_blank" href="https://www.reddit.com/user/toebi">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-reddit fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
            
                    
                    
            
            
            
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; toeb&#39;s Blog 2021
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    async("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>






</body>
</html>
