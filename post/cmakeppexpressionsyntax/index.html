<!DOCTYPE html>
<html lang="en-us">
<head>
    

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-177198277-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-177198277-1');
    </script>


    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="toeb&#39;s Blog">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://toeb.github.io//images/carbon.png">
    <meta property="twitter:image" content="https://toeb.github.io//images/carbon.png" />
    

    
    <meta name="title" content="cmakepp: Expression Syntax" />
    <meta property="og:title" content="cmakepp: Expression Syntax" />
    <meta property="twitter:title" content="cmakepp: Expression Syntax" />
    

    
    <meta name="description" content="Discussion of an Alternative Syntax for CMake">
    <meta property="og:description" content="Discussion of an Alternative Syntax for CMake" />
    <meta property="twitter:description" content="Discussion of an Alternative Syntax for CMake" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="thetoeb, toeb, blog, programming">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>cmakepp: Expression Syntax-Toeb Blog</title>

    <link rel="canonical" href="/post/cmakeppexpressionsyntax/">

    <link rel="stylesheet" href="/css/iDisqus.min.css"/>
	
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">
    
    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    
    

    
    
    <script src="/js/jquery.min.js"></script>
    
    
    <script src="/js/bootstrap.min.js"></script>
    
    
    <script src="/js/hux-blog.min.js"></script>

    
    

</head>



<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">toeb&#39;s Blog</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                        
                        <li>
                            <a href="/categories/c">c#</a>
                        </li>
                        
                        <li>
                            <a href="/categories/cmake">cmake</a>
                        </li>
                        
                    
                    
		    
                        <li><a href="/top/about/">ABOUT</a></li>
                    

                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/images/carbon.png')
    }
</style>
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/cmake" title="cmake">
                            cmake
                        </a>
                        
                        <a class="tag" href="/tags/expression" title="expression">
                            expression
                        </a>
                        
                    </div>
                    <h1>cmakepp: Expression Syntax</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by 
                        
                                 &#34;toeb&#34;
                         
                        on 
                        Monday, June 4, 2018
                        
                        
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                post-container">

                
                <p>“CMake’s syntax is not sexy.” Is a statement that probably everyone can understand. It does not allow the developer rudimentary constructs which almost all other languages have. But because CMake’s language is astonishingly flexible I was able to create a lexer and parser and interpreter for a custom 100 % compatible syntax which (once “JIT transpiled”) is also fast. I call it cmakepp expressions or expr for short. I want to emphasize that all of this is written in 100% compatible cmake code and you can use it without the need to preprocess any cmake files or adding any dependencies (except cmakepp).</p>
<p>You can get access to my project at <a href="https://github.com/toeb/cmakepp">https://github.com/toeb/cmakepp</a>. I greatly appreciate new users, likes and feedback. If you want you can even help make cmakepp better by submitting issues or pull requests. The largest discussions to my posts is always on reddit.</p>
<h2 id="example">Example</h2>
<p>The easiest way to introduce the new expr syntax and its usefulness is by example. So here it is (Note that these example are actually executed during the generation of this document using my cmake template engine (link) so the result displayed is actually computed).</p>
<p>You can run these examples yourself – just look at the getting cmakepp section in cmakepp‘s documentation. (Which boils down to downloading a single file and including it)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmake" data-lang="cmake"><span style="color:#75715e">## results of the evaluation are printed as normal strings or 
</span><span style="color:#75715e">## as json if the result contains an object (complex data)
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># values
</span><span style="color:#75715e">## number
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">1</span>) <span style="color:#75715e"># =&gt; `1` 
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## bool
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">true</span>) <span style="color:#75715e"># =&gt; `true`
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">false</span>) <span style="color:#75715e"># =&gt; `false`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## null
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">null</span>) <span style="color:#75715e"># =&gt; ``
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## single quoted string
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">&#34;&#39;hello world&#39;&#34;</span>) <span style="color:#75715e"># =&gt; `hello world` 
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">&#34;&#39;null&#39;&#34;</span>) <span style="color:#75715e"># =&gt; `null` 
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## double quoted string
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">&#34;\&#34;</span><span style="color:#e6db74">hello</span> <span style="color:#e6db74">world\</span><span style="color:#e6db74">&#34;&#34;</span>) <span style="color:#75715e"># =&gt; `hello world`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## separated string (a string which is a single argument)
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">&#34;hello world&#34;</span>) <span style="color:#75715e"># =&gt; `hello world` 
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## unquoted
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">hello</span>)  <span style="color:#75715e"># =&gt; `hello`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## list
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">[1,2,3]</span>)  <span style="color:#75715e"># =&gt; `1;2;3`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## object 
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">{first_name:Tobias,</span> <span style="color:#e6db74">&#39;last_name&#39;:</span> <span style="color:#e6db74">&#34;Becker&#34;</span> <span style="color:#e6db74">}</span>)  <span style="color:#75715e"># =&gt; {&#34;first_name&#34;:&#34;Tobias&#34;,&#34;last_name&#34;:&#34;Becker&#34;}
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## complex value
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">{value:[1,{a:2,b:{c:[3,4,5],d:2}},{}]}</span>)  <span style="color:#75715e"># =&gt; {&#34;value&#34;:[1,{&#34;a&#34;:2,&#34;b&#34;:{&#34;c&#34;:[3,4,5],&#34;d&#34;:2}},{}]}
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## concatenation 
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">hello</span> <span style="color:#e6db74">world</span> <span style="color:#e6db74">1</span> <span style="color:#e6db74">null</span> <span style="color:#e6db74">2</span> <span style="color:#e6db74">&#39;null&#39;</span> <span style="color:#e6db74">3</span>) <span style="color:#75715e"># =&gt; `helloworld12null3`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># scope variables
</span><span style="color:#75715e">## variable
</span><span style="color:#75715e"></span>set(<span style="color:#e6db74">my_var</span> <span style="color:#e6db74">&#34;hello world&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>expr(<span style="color:#960050;background-color:#1e0010">$</span><span style="color:#e6db74">my_var</span>) <span style="color:#75715e"># =&gt; `hello world`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## variable scope variable 
</span><span style="color:#75715e"></span>set(<span style="color:#e6db74">my_var</span> <span style="color:#e6db74">&#34;hello world&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>set(<span style="color:#e6db74">var_name</span> <span style="color:#e6db74">my_var</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>expr(<span style="color:#960050;background-color:#1e0010">$</span>(<span style="color:#960050;background-color:#1e0010">$</span><span style="color:#e6db74">var_name</span>))  <span style="color:#75715e"># =&gt; `hello world`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## assign scope variable
</span><span style="color:#75715e"></span>expr(<span style="color:#960050;background-color:#1e0010">$</span><span style="color:#e6db74">a</span> <span style="color:#e6db74">=</span> <span style="color:#e6db74">1</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">&#34;${a}&#34;</span> <span style="color:#e6db74">EQUAL</span> <span style="color:#e6db74">1</span>)  <span style="color:#75715e"># =&gt; `1`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># function
</span><span style="color:#75715e">## test function
</span><span style="color:#75715e"></span>function(<span style="color:#e6db74">my_add</span> <span style="color:#e6db74">lhs</span> <span style="color:#e6db74">rhs</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    math(<span style="color:#e6db74">EXPR</span> <span style="color:#e6db74">sum</span> <span style="color:#e6db74">&#34;${lhs} + ${rhs}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    return(<span style="color:#e6db74">&#34;${sum}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>endfunction()<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## call normal cmake function
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">my_add(1,2</span>)<span style="color:#960050;background-color:#1e0010">)</span>  <span style="color:#75715e"># =&gt; `3`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## use function invocation as argument (`f(g(x))`)
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">my_add(my_add(my_add(1,2</span>)<span style="color:#960050;background-color:#1e0010">,3),4))</span> <span style="color:#75715e"># =&gt; `10`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## use bind call which inserts the left hand value into a function as the first parameter 
</span><span style="color:#75715e"></span>expr(<span style="color:#e6db74">&#34;hello there this is my new title&#34;</span><span style="color:#e6db74">::string_to_title(</span>)<span style="color:#960050;background-color:#1e0010">)</span> <span style="color:#75715e"># =&gt; `Hello There This Is My New Title`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## **enabling cmakepp expressions for the current function or file scope**
</span><span style="color:#75715e">## All expressions before the call to `cmakepp_enable_expressions` are not 
</span><span style="color:#75715e">## evaluated as expressions.  All code after the call to 
</span><span style="color:#75715e">## `cmakepp_enable_expressions` is evaluated.  (also sub functions, but not includes)
</span><span style="color:#75715e">## This is a very hacky approach beacuse it works by parsing 
</span><span style="color:#75715e">## the and transpiling current file. It works in standard cases. In complex 
</span><span style="color:#75715e">## cases I suggest you rather define a new function which uses 
</span><span style="color:#75715e">## the `arguments_expression` macro which is more consistent in behaviour. 
</span><span style="color:#75715e">## Please consult the documentation of `cmakepp_enable_expressions` before 
</span><span style="color:#75715e">## using it. 
</span><span style="color:#75715e"></span>function(<span style="color:#e6db74">my_test_function</span>) <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e">## here expressions ARE NOT evaluated yet
</span><span style="color:#75715e"></span>    set(<span style="color:#e6db74">result</span> <span style="color:#e6db74">&#34;unevaluated $[hello world]&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e">## this call causes cmakepp expressions to be evaluated for
</span><span style="color:#75715e"></span>    <span style="color:#75715e">## the rest of the current function body
</span><span style="color:#75715e"></span>    cmakepp_enable_expressions(<span style="color:#f92672">${</span>CMAKE_CURRENT_LIST_LINE<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e">## here expressions ARE being evaluated
</span><span style="color:#75715e"></span>    set(<span style="color:#e6db74">result</span> <span style="color:#e6db74">&#34;${result} evaluated: $[hello world]&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    return(<span style="color:#f92672">${</span>result<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>endfunction()<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>my_test_function() <span style="color:#75715e"># =&gt; `unevaluated $[hello world] evaluated: helloworld`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## defining a cmake function which parses it parameters using `expr`
</span><span style="color:#75715e">## This a replacement for `cmake_parse_arguments` which is more mighty and
</span><span style="color:#75715e">## also very easy to use
</span><span style="color:#75715e">## 
</span><span style="color:#75715e"></span>function(<span style="color:#e6db74">my_other_test_function</span>) <span style="color:#75715e">## note: no arguments defined
</span><span style="color:#75715e"></span>    <span style="color:#75715e">## 0 ${ARGC} specify the range of arguments of `my_other_test_function`
</span><span style="color:#75715e"></span>    <span style="color:#75715e">## which are to be parsed.  The normal case is `0 ${ARGC}` however you can
</span><span style="color:#75715e"></span>    <span style="color:#75715e">## also choose to mix cmake argument handling and expression arguments
</span><span style="color:#75715e"></span>    <span style="color:#75715e">## here you can also specify arguments which are extracted
</span><span style="color:#75715e"></span>    arguments_expression(<span style="color:#e6db74">0</span> <span style="color:#f92672">${</span>ARGC<span style="color:#f92672">}</span> <span style="color:#e6db74">var_1</span> <span style="color:#e6db74">var_2</span> <span style="color:#e6db74">var_3</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e">## all arguments which are left unparsed are returned in encoded list 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">## format and need to be `encoded_list_decode`&#39;d before they can be used
</span><span style="color:#75715e"></span>    ans(<span style="color:#e6db74">unused_arguments</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    set(<span style="color:#e6db74">result</span>  <span style="color:#e6db74">&#34;result of arguments_expression macro: \n&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    set(<span style="color:#e6db74">counter</span> <span style="color:#e6db74">0</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    foreach(<span style="color:#e6db74">unused_arg</span> <span style="color:#f92672">${</span>unused_arguments<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>        math(<span style="color:#e6db74">EXPR</span> <span style="color:#e6db74">counter</span> <span style="color:#e6db74">&#34;${counter} + 1&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>        encoded_list_decode(<span style="color:#e6db74">&#34;${unused_arg}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>        ans(<span style="color:#e6db74">decoded_unused_arg</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>        set(<span style="color:#e6db74">result</span> <span style="color:#e6db74">&#34;${result}unused_arg[${counter}]: &#39;${decoded_unused_arg}&#39;\n&#34;</span>)        <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    endforeach()<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e">## defined arguments are available as scope variables
</span><span style="color:#75715e"></span>    set(<span style="color:#e6db74">result</span> <span style="color:#e6db74">&#34;${result}var_1: ${var_1}\n&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    set(<span style="color:#e6db74">result</span> <span style="color:#e6db74">&#34;${result}var_2: ${var_2}\n&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    set(<span style="color:#e6db74">result</span> <span style="color:#e6db74">&#34;${result}var_3: ${var_3}\n&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e">## named arguments which are not defined are not 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">## imported into the functions scope. They are still 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">## accessible through `arguments_expression_result` (a map)
</span><span style="color:#75715e"></span>    format(<span style="color:#e6db74">&#34;var_4: {arguments_expression_result.var_4}\nvar_5:{arguments_expression_result.var_5}\n&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    ans(<span style="color:#e6db74">formatted</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    set(<span style="color:#e6db74">result</span> <span style="color:#e6db74">&#34;${result}${formatted}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e">## return the string
</span><span style="color:#75715e"></span>    return_ref(<span style="color:#e6db74">result</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>endfunction()<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## Explanation of function call:
</span><span style="color:#75715e">## the first argument `[a,eval_math(&#39;3*5&#39;),c]` is treated as a single list and 
</span><span style="color:#75715e">## put into `var_1`.  
</span><span style="color:#75715e">## the second argument is spread out (because of ellipsis `...` operation)
</span><span style="color:#75715e">## and therfore only the first value lands in `var_3` 
</span><span style="color:#75715e">## named vars have a higher precedence than positional vars therefore `var_2` 
</span><span style="color:#75715e">## contains `hello world`
</span><span style="color:#75715e">## unused named vars are ignored but can be still be accessed using the
</span><span style="color:#75715e">## `arguments_expression_result` variable which is automatically defined 
</span><span style="color:#75715e">## after calling the `arguments_expression` macro
</span><span style="color:#75715e">## please note that commas are important
</span><span style="color:#75715e"></span>my_other_test_function(
    <span style="color:#e6db74">[a,eval_math(&#39;3*5&#39;</span>)<span style="color:#960050;background-color:#1e0010">,c],
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#960050;background-color:#1e0010">[d,e]...,
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#960050;background-color:#1e0010">var_2:</span> <span style="color:#960050;background-color:#1e0010">&#34;hello</span> <span style="color:#960050;background-color:#1e0010">world&#34;</span> <span style="color:#960050;background-color:#1e0010">,
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#960050;background-color:#1e0010">f,[g,h],
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#960050;background-color:#1e0010">var_4:</span> <span style="color:#960050;background-color:#1e0010">&#34;another</span> <span style="color:#960050;background-color:#1e0010">value&#34;
</span><span style="color:#960050;background-color:#1e0010">)</span>  <span style="color:#75715e"># =&gt; `result of arguments_expression macro: 
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">unused_arg[1]:</span> <span style="color:#960050;background-color:#1e0010">&#39;e&#39;
</span><span style="color:#960050;background-color:#1e0010">unused_arg[2]:</span> <span style="color:#960050;background-color:#1e0010">&#39;f&#39;
</span><span style="color:#960050;background-color:#1e0010">unused_arg[3]:</span> <span style="color:#960050;background-color:#1e0010">&#39;g;h&#39;
</span><span style="color:#960050;background-color:#1e0010">var_1:</span> <span style="color:#960050;background-color:#1e0010">a;15;c
</span><span style="color:#960050;background-color:#1e0010">var_2:</span> <span style="color:#960050;background-color:#1e0010">hello</span> <span style="color:#960050;background-color:#1e0010">world
</span><span style="color:#960050;background-color:#1e0010">var_3:</span> <span style="color:#960050;background-color:#1e0010">d
</span><span style="color:#960050;background-color:#1e0010">var_4:</span> <span style="color:#960050;background-color:#1e0010">another</span> <span style="color:#960050;background-color:#1e0010">value
</span><span style="color:#960050;background-color:#1e0010">var_5:
</span><span style="color:#960050;background-color:#1e0010">`
</span></code></pre></div><p>##Functions and Datatypes</p>
<p>I provide the following functions for you to interact with expr.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmake" data-lang="cmake"><span style="color:#960050;background-color:#1e0010">expr
</span><span style="color:#960050;background-color:#1e0010">arguments_expression
</span><span style="color:#960050;background-color:#1e0010">cmakepp_enable_expressions
</span><span style="color:#960050;background-color:#1e0010">expr
</span><span style="color:#960050;background-color:#1e0010">(&lt;expression&gt;)-&gt;&lt;any&gt;
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">parses,</span> <span style="color:#960050;background-color:#1e0010">compiles</span> <span style="color:#960050;background-color:#1e0010">and</span> <span style="color:#960050;background-color:#1e0010">evaluates</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">specified</span> <span style="color:#960050;background-color:#1e0010">expression.</span> <span style="color:#960050;background-color:#1e0010">The</span> <span style="color:#960050;background-color:#1e0010">compilation</span> <span style="color:#960050;background-color:#1e0010">result</span> <span style="color:#960050;background-color:#1e0010">is</span> cached (<span style="color:#e6db74">per</span> <span style="color:#e6db74">cmake</span> <span style="color:#e6db74">run</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">arguments_expression
</span><span style="color:#960050;background-color:#1e0010">(&lt;begin</span> <span style="color:#960050;background-color:#1e0010">index&gt;</span> <span style="color:#960050;background-color:#1e0010">&lt;end</span> <span style="color:#960050;background-color:#1e0010">index&gt;</span> <span style="color:#960050;background-color:#1e0010">&lt;parameter</span> <span style="color:#960050;background-color:#1e0010">definition&gt;...)-&gt;&lt;any&gt;...
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">parses</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">arguments</span> <span style="color:#960050;background-color:#1e0010">of</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">calling</span> <span style="color:#960050;background-color:#1e0010">function</span> <span style="color:#960050;background-color:#1e0010">cmakepp</span> <span style="color:#960050;background-color:#1e0010">expressions</span> <span style="color:#960050;background-color:#1e0010">expects</span> <span style="color:#960050;background-color:#1e0010">begin</span> <span style="color:#960050;background-color:#1e0010">index</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">be</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">index</span> <span style="color:#960050;background-color:#1e0010">of</span> <span style="color:#960050;background-color:#1e0010">first</span> <span style="color:#960050;background-color:#1e0010">function</span> parameters (<span style="color:#e6db74">commonly</span> <span style="color:#e6db74">0</span>) <span style="color:#960050;background-color:#1e0010">and</span> <span style="color:#960050;background-color:#1e0010">end</span> <span style="color:#960050;background-color:#1e0010">index</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">be</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">index</span> <span style="color:#960050;background-color:#1e0010">of</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">last</span> <span style="color:#960050;background-color:#1e0010">function</span> <span style="color:#960050;background-color:#1e0010">parameter</span> <span style="color:#960050;background-color:#1e0010">to</span> parse (<span style="color:#e6db74">commonly</span> <span style="color:#f92672">${</span>ARGC<span style="color:#f92672">}</span>) <span style="color:#960050;background-color:#1e0010">var</span> <span style="color:#960050;background-color:#1e0010">args</span> <span style="color:#960050;background-color:#1e0010">are</span> <span style="color:#960050;background-color:#1e0010">named</span> <span style="color:#960050;background-color:#1e0010">arguments</span> <span style="color:#960050;background-color:#1e0010">which</span> <span style="color:#960050;background-color:#1e0010">will</span> <span style="color:#960050;background-color:#1e0010">be</span> <span style="color:#960050;background-color:#1e0010">set</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">be</span> <span style="color:#960050;background-color:#1e0010">available</span> <span style="color:#960050;background-color:#1e0010">in</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">function</span> <span style="color:#960050;background-color:#1e0010">scope
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">named</span> <span style="color:#960050;background-color:#1e0010">arguments</span> <span style="color:#960050;background-color:#1e0010">passed</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">function</span> <span style="color:#960050;background-color:#1e0010">have</span> <span style="color:#960050;background-color:#1e0010">a</span> <span style="color:#960050;background-color:#1e0010">higher</span> <span style="color:#960050;background-color:#1e0010">precedence</span> <span style="color:#960050;background-color:#1e0010">than</span> <span style="color:#960050;background-color:#1e0010">positional</span> <span style="color:#960050;background-color:#1e0010">arguments
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">sideffects:</span> <span style="color:#960050;background-color:#1e0010">*</span> <span style="color:#960050;background-color:#1e0010">arguments_expression_result</span> <span style="color:#960050;background-color:#1e0010">is</span> <span style="color:#960050;background-color:#1e0010">a</span> <span style="color:#960050;background-color:#1e0010">address</span> <span style="color:#960050;background-color:#1e0010">of</span> <span style="color:#960050;background-color:#1e0010">an</span> <span style="color:#960050;background-color:#1e0010">object</span> <span style="color:#960050;background-color:#1e0010">containing</span> <span style="color:#960050;background-color:#1e0010">all</span> <span style="color:#960050;background-color:#1e0010">parsed</span> <span style="color:#960050;background-color:#1e0010">data</span> <span style="color:#960050;background-color:#1e0010">*</span> <span style="color:#960050;background-color:#1e0010">scope</span> <span style="color:#960050;background-color:#1e0010">operations</span> <span style="color:#960050;background-color:#1e0010">may</span> <span style="color:#960050;background-color:#1e0010">modify</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">parent</span> <span style="color:#960050;background-color:#1e0010">scope</span> <span style="color:#960050;background-color:#1e0010">of</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">function
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">cmakepp_enable_expressions
</span><span style="color:#960050;background-color:#1e0010">(${CMAKE_CURRENT_LIST_LINE})-&gt;&lt;any&gt;
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">you</span> <span style="color:#960050;background-color:#1e0010">need</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">pass</span> <span style="color:#960050;background-color:#1e0010">${CMAKE_CURRENT_LIST_LINE}</span> <span style="color:#960050;background-color:#1e0010">for</span> <span style="color:#960050;background-color:#1e0010">this</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">work
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">this</span> <span style="color:#960050;background-color:#1e0010">macro</span> <span style="color:#960050;background-color:#1e0010">enables</span> <span style="color:#960050;background-color:#1e0010">all</span> <span style="color:#960050;background-color:#1e0010">expressions</span> <span style="color:#960050;background-color:#1e0010">in</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">current</span> <span style="color:#960050;background-color:#1e0010">scope</span> <span style="color:#960050;background-color:#1e0010">it</span> <span style="color:#960050;background-color:#1e0010">will</span> <span style="color:#960050;background-color:#1e0010">only</span> <span style="color:#960050;background-color:#1e0010">work</span> <span style="color:#960050;background-color:#1e0010">in</span> <span style="color:#960050;background-color:#1e0010">a</span> <span style="color:#960050;background-color:#1e0010">CMake</span> <span style="color:#960050;background-color:#1e0010">file</span> <span style="color:#960050;background-color:#1e0010">scioe</span> <span style="color:#960050;background-color:#1e0010">or</span> <span style="color:#960050;background-color:#1e0010">inside</span> <span style="color:#960050;background-color:#1e0010">a</span> <span style="color:#960050;background-color:#1e0010">cmake</span> <span style="color:#960050;background-color:#1e0010">function</span> <span style="color:#960050;background-color:#1e0010">scope.</span> <span style="color:#960050;background-color:#1e0010">You</span> <span style="color:#960050;background-color:#1e0010">CANNOT</span> <span style="color:#960050;background-color:#1e0010">use</span> <span style="color:#960050;background-color:#1e0010">it</span> <span style="color:#960050;background-color:#1e0010">in</span> <span style="color:#960050;background-color:#1e0010">a</span> <span style="color:#960050;background-color:#1e0010">loop,</span> <span style="color:#960050;background-color:#1e0010">if</span> <span style="color:#960050;background-color:#1e0010">statement,</span> <span style="color:#960050;background-color:#1e0010">macro</span> etc (<span style="color:#e6db74">everything</span> <span style="color:#e6db74">that</span> <span style="color:#e6db74">has</span> <span style="color:#e6db74">a</span> <span style="color:#e6db74">begin/end</span>) <span style="color:#960050;background-color:#1e0010">Every</span> <span style="color:#960050;background-color:#1e0010">expression</span> <span style="color:#960050;background-color:#1e0010">inside</span> <span style="color:#960050;background-color:#1e0010">that</span> scope (<span style="color:#e6db74">and</span> <span style="color:#e6db74">its</span> <span style="color:#e6db74">subscopes</span>) <span style="color:#960050;background-color:#1e0010">will</span> <span style="color:#960050;background-color:#1e0010">be</span> <span style="color:#960050;background-color:#1e0010">evaluated.
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">Implementation</span> <span style="color:#960050;background-color:#1e0010">Note:</span> <span style="color:#960050;background-color:#1e0010">This</span> <span style="color:#960050;background-color:#1e0010">is</span> <span style="color:#960050;background-color:#1e0010">achieved</span> <span style="color:#960050;background-color:#1e0010">by</span> <span style="color:#960050;background-color:#1e0010">parsing</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">while</span> <span style="color:#960050;background-color:#1e0010">cmake</span> file (<span style="color:#e6db74">and</span> <span style="color:#e6db74">thus</span> <span style="color:#e6db74">potentially</span> <span style="color:#e6db74">takes</span> <span style="color:#e6db74">very</span> <span style="color:#e6db74">long</span>) <span style="color:#960050;background-color:#1e0010">Afterwards</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">line</span> <span style="color:#960050;background-color:#1e0010">which</span> <span style="color:#960050;background-color:#1e0010">you</span> <span style="color:#960050;background-color:#1e0010">pass</span> <span style="color:#960050;background-color:#1e0010">as</span> <span style="color:#960050;background-color:#1e0010">an</span> <span style="color:#960050;background-color:#1e0010">argument</span> <span style="color:#960050;background-color:#1e0010">is</span> <span style="color:#960050;background-color:#1e0010">used</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">find</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">location</span> <span style="color:#960050;background-color:#1e0010">of</span> <span style="color:#960050;background-color:#1e0010">this</span> <span style="color:#960050;background-color:#1e0010">macro</span> <span style="color:#960050;background-color:#1e0010">every</span> <span style="color:#960050;background-color:#1e0010">argument</span> <span style="color:#960050;background-color:#1e0010">for</span> <span style="color:#960050;background-color:#1e0010">every</span> <span style="color:#960050;background-color:#1e0010">following</span> <span style="color:#960050;background-color:#1e0010">expression</span> <span style="color:#960050;background-color:#1e0010">in</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">current</span> <span style="color:#960050;background-color:#1e0010">code</span> <span style="color:#960050;background-color:#1e0010">scope</span> <span style="color:#960050;background-color:#1e0010">is</span> <span style="color:#960050;background-color:#1e0010">scanned</span> <span style="color:#960050;background-color:#1e0010">for</span> <span style="color:#960050;background-color:#1e0010">$[...]</span> <span style="color:#960050;background-color:#1e0010">brackets</span> <span style="color:#960050;background-color:#1e0010">which</span> <span style="color:#960050;background-color:#1e0010">are</span> <span style="color:#960050;background-color:#1e0010">in</span> <span style="color:#960050;background-color:#1e0010">turn</span> <span style="color:#960050;background-color:#1e0010">lexed,parsed</span> <span style="color:#960050;background-color:#1e0010">and</span> compiled (<span style="color:#e6db74">see</span> <span style="color:#e6db74">expr(</span>)<span style="color:#960050;background-color:#1e0010">)</span> <span style="color:#960050;background-color:#1e0010">and</span> <span style="color:#960050;background-color:#1e0010">injected</span> <span style="color:#960050;background-color:#1e0010">into</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">code</span> <span style="color:#960050;background-color:#1e0010">which</span> <span style="color:#960050;background-color:#1e0010">is</span> <span style="color:#960050;background-color:#1e0010">in</span> <span style="color:#960050;background-color:#1e0010">turn</span> <span style="color:#960050;background-color:#1e0010">included
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">The</span> <span style="color:#960050;background-color:#1e0010">Expression</span> <span style="color:#960050;background-color:#1e0010">Language</span> <span style="color:#960050;background-color:#1e0010">Definition
</span><span style="color:#960050;background-color:#1e0010">I</span> <span style="color:#960050;background-color:#1e0010">mixed</span> <span style="color:#960050;background-color:#1e0010">several</span> <span style="color:#960050;background-color:#1e0010">constructs</span> <span style="color:#960050;background-color:#1e0010">and</span> <span style="color:#960050;background-color:#1e0010">concepts</span> <span style="color:#960050;background-color:#1e0010">from</span> <span style="color:#960050;background-color:#1e0010">different</span> <span style="color:#960050;background-color:#1e0010">languages</span> <span style="color:#960050;background-color:#1e0010">which</span> <span style="color:#960050;background-color:#1e0010">I</span> <span style="color:#960050;background-color:#1e0010">like</span> <span style="color:#960050;background-color:#1e0010">–</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">syntax</span> <span style="color:#960050;background-color:#1e0010">should</span> <span style="color:#960050;background-color:#1e0010">be</span> <span style="color:#960050;background-color:#1e0010">familiar</span> <span style="color:#960050;background-color:#1e0010">for</span> <span style="color:#960050;background-color:#1e0010">someone</span> <span style="color:#960050;background-color:#1e0010">who</span> <span style="color:#960050;background-color:#1e0010">knows</span> <span style="color:#960050;background-color:#1e0010">JavaScript</span> <span style="color:#960050;background-color:#1e0010">and</span> <span style="color:#960050;background-color:#1e0010">C++.</span> <span style="color:#960050;background-color:#1e0010">I</span> <span style="color:#960050;background-color:#1e0010">am</span> <span style="color:#960050;background-color:#1e0010">not</span> <span style="color:#960050;background-color:#1e0010">a</span> <span style="color:#960050;background-color:#1e0010">professional</span> <span style="color:#960050;background-color:#1e0010">language</span> <span style="color:#960050;background-color:#1e0010">designer</span> <span style="color:#960050;background-color:#1e0010">so</span> <span style="color:#960050;background-color:#1e0010">some</span> <span style="color:#960050;background-color:#1e0010">decisions</span> <span style="color:#960050;background-color:#1e0010">might</span> <span style="color:#960050;background-color:#1e0010">seem</span> <span style="color:#960050;background-color:#1e0010">strange</span> <span style="color:#960050;background-color:#1e0010">however</span> <span style="color:#960050;background-color:#1e0010">I</span> <span style="color:#960050;background-color:#1e0010">have</span> <span style="color:#960050;background-color:#1e0010">tested</span> <span style="color:#960050;background-color:#1e0010">everything</span> <span style="color:#960050;background-color:#1e0010">thouroughly</span> <span style="color:#960050;background-color:#1e0010">and</span> <span style="color:#960050;background-color:#1e0010">am</span> <span style="color:#960050;background-color:#1e0010">happy</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">fix</span> <span style="color:#960050;background-color:#1e0010">any</span> <span style="color:#960050;background-color:#1e0010">bugs.
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">For</span> <span style="color:#960050;background-color:#1e0010">better</span> <span style="color:#960050;background-color:#1e0010">or</span> <span style="color:#960050;background-color:#1e0010">worse</span> <span style="color:#960050;background-color:#1e0010">here</span> <span style="color:#960050;background-color:#1e0010">is</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">language</span> <span style="color:#960050;background-color:#1e0010">definition</span> <span style="color:#960050;background-color:#1e0010">which</span> <span style="color:#960050;background-color:#1e0010">is</span> <span style="color:#960050;background-color:#1e0010">still</span> <span style="color:#960050;background-color:#1e0010">a</span> <span style="color:#960050;background-color:#1e0010">work</span> <span style="color:#960050;background-color:#1e0010">in</span> <span style="color:#960050;background-color:#1e0010">progress.
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## the forbidden chars are used by the tokenizer and using them will cause the world to explode. They are all valid ASCII codes &lt; 32 and &gt; 0 
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">&lt;forbidden</span> <span style="color:#960050;background-color:#1e0010">char&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span>  <span style="color:#960050;background-color:#1e0010">SOH</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">NAK</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">US</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">STX</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">ETX</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">GS</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">FS</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">SO</span>  <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;escapeable</span> <span style="color:#960050;background-color:#1e0010">char&gt;</span> <span style="color:#960050;background-color:#1e0010">::</span> <span style="color:#960050;background-color:#1e0010">=</span> <span style="color:#960050;background-color:#1e0010">&#34;\&#34;</span> <span style="color:#960050;background-color:#1e0010">&#34;&#34;&#34;</span> <span style="color:#960050;background-color:#1e0010">&#34;&#39;&#34;</span>  <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;free</span> <span style="color:#960050;background-color:#1e0010">char&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;ascii</span> <span style="color:#960050;background-color:#1e0010">char&gt;</span>  <span style="color:#960050;background-color:#1e0010">/</span>  <span style="color:#960050;background-color:#1e0010">&lt;forbidden</span> <span style="color:#960050;background-color:#1e0010">char&gt;</span> <span style="color:#960050;background-color:#1e0010">/</span> <span style="color:#960050;background-color:#1e0010">&lt;escapablechar&gt;</span> <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;escaped</span> <span style="color:#960050;background-color:#1e0010">char&gt;</span> <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;quoted</span> <span style="color:#960050;background-color:#1e0010">string</span> <span style="color:#960050;background-color:#1e0010">content&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;&lt;char&gt;|&#34;\&#34;</span> <span style="color:#960050;background-color:#1e0010">&lt;escaped</span> <span style="color:#960050;background-color:#1e0010">char&gt;&gt;*</span> <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## strings 
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">&lt;double</span> <span style="color:#960050;background-color:#1e0010">quoted</span> <span style="color:#960050;background-color:#1e0010">string&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&#34;&#34;&#34;</span> <span style="color:#960050;background-color:#1e0010">&lt;quoted</span> <span style="color:#960050;background-color:#1e0010">string</span> <span style="color:#960050;background-color:#1e0010">content&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;&#34;&#34;
</span><span style="color:#960050;background-color:#1e0010"></span>    expr(<span style="color:#e6db74">&#34;\&#34;</span><span style="color:#e6db74">\&#34;&#34;)</span> <span style="color:#75715e"># =&gt; ``
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">expr(</span><span style="color:#e6db74">&#34;\&#34;</span><span style="color:#e6db74">hello\</span><span style="color:#e6db74">&#34;&#34;</span>) <span style="color:#75715e"># =&gt; `hello`
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">&#34;\&#34;</span><span style="color:#e6db74">\\&#39;</span> <span style="color:#e6db74">single</span> <span style="color:#e6db74">quote\</span><span style="color:#e6db74">&#34;&#34;</span>) <span style="color:#75715e"># =&gt; `&#39; single quote`
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">&#34;\&#34;</span><span style="color:#e6db74">\\\&#34;</span> <span style="color:#e6db74">double</span> <span style="color:#e6db74">quote\</span><span style="color:#e6db74">&#34;&#34;</span>) <span style="color:#75715e"># =&gt; `&#34; double quote`
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">&#34;\&#34;</span><span style="color:#e6db74">\\</span> <span style="color:#e6db74">backslash\</span><span style="color:#e6db74">&#34;&#34;</span>) <span style="color:#75715e"># =&gt; `\ backslash`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;single</span> <span style="color:#960050;background-color:#1e0010">quoted</span> <span style="color:#960050;background-color:#1e0010">string&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&#34;&#39;&#34;</span> <span style="color:#960050;background-color:#1e0010">&lt;quoted</span> <span style="color:#960050;background-color:#1e0010">string</span> <span style="color:#960050;background-color:#1e0010">content&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;&#39;&#34;
</span><span style="color:#960050;background-color:#1e0010"></span>    expr(<span style="color:#e6db74">&#34;&#39;&#39;&#34;</span>) <span style="color:#75715e"># =&gt; ``
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">&#39;&#39;</span>) <span style="color:#75715e"># =&gt; ``
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">&#34;&#39;hello&#39;&#34;</span>) <span style="color:#75715e"># =&gt; `hello`
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">&#39;hello&#39;</span>) <span style="color:#75715e"># =&gt; `hello`
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">&#34;&#39;hello world&#39;&#34;</span>) <span style="color:#75715e"># =&gt; `hello world`
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">&#34;&#39;\\&#39; single quote&#39;&#34;</span>) <span style="color:#75715e"># =&gt; `&#39; single quote`
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">&#34;&#39;\\\&#34;</span> <span style="color:#e6db74">double</span> <span style="color:#e6db74">quote&#39;</span><span style="color:#e6db74">&#34;) # =&gt; `&#34;</span> <span style="color:#e6db74">double</span> <span style="color:#e6db74">quote`</span>
    <span style="color:#e6db74">expr(</span><span style="color:#e6db74">&#34;&#39;\\\\ backslash&#39;&#34;</span>) <span style="color:#75715e"># =&gt; `\\ backslash`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;unquoted</span> <span style="color:#960050;background-color:#1e0010">string&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    expr(<span style="color:#e6db74">hello</span>) <span style="color:#75715e"># =&gt; `hello`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;separated</span> <span style="color:#960050;background-color:#1e0010">string&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    expr(<span style="color:#e6db74">&#34;&#34;</span>) <span style="color:#75715e"># =&gt; ``
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">&#34;hello world&#34;</span>) <span style="color:#75715e"># =&gt; `hello world`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;string&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;double</span> <span style="color:#960050;background-color:#1e0010">quoted</span> <span style="color:#960050;background-color:#1e0010">string&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;single</span> <span style="color:#960050;background-color:#1e0010">quoted</span> <span style="color:#960050;background-color:#1e0010">string&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;unquoted</span> <span style="color:#960050;background-color:#1e0010">string&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;separated</span> <span style="color:#960050;background-color:#1e0010">string&gt;
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## every literal is a const string 
</span><span style="color:#75715e">## some unquoted strings have a special meaning
</span><span style="color:#75715e">## quoted strings are always strings even if their content matches one
</span><span style="color:#75715e">## of the specialized definitions
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">&lt;number&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">/0|[1-9][0-9]*/
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#960050;background-color:#1e0010">number
</span><span style="color:#960050;background-color:#1e0010"></span>        expr(<span style="color:#e6db74">0</span>) <span style="color:#75715e"># =&gt; `0`
</span><span style="color:#75715e"></span>        expr(<span style="color:#e6db74">1</span>) <span style="color:#75715e"># =&gt; `1`
</span><span style="color:#75715e"></span>        expr(<span style="color:#e6db74">912930</span>) <span style="color:#75715e"># =&gt; `912930`
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">NOT</span> <span style="color:#960050;background-color:#1e0010">number:
</span><span style="color:#960050;background-color:#1e0010"></span>        expr(<span style="color:#e6db74">01</span>) <span style="color:#75715e"># =&gt; `01`
</span><span style="color:#75715e"></span>        expr(<span style="color:#e6db74">&#39;1&#39;</span>) <span style="color:#75715e"># =&gt; `1`
</span><span style="color:#75715e"></span>        expr(<span style="color:#e6db74">&#34;\&#34;</span><span style="color:#e6db74">1\</span><span style="color:#e6db74">&#34;&#34;</span>) <span style="color:#75715e"># =&gt; `1`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;bool&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&#34;true&#34;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&#34;false&#34;
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#960050;background-color:#1e0010">bool
</span><span style="color:#960050;background-color:#1e0010"></span>        expr(<span style="color:#e6db74">true</span>) <span style="color:#75715e"># =&gt; `true`
</span><span style="color:#75715e"></span>        expr(<span style="color:#e6db74">false</span>) <span style="color:#75715e"># =&gt; `false`
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">NOT</span> <span style="color:#960050;background-color:#1e0010">bool
</span><span style="color:#960050;background-color:#1e0010"></span>        expr(<span style="color:#e6db74">&#39;true&#39;</span>) <span style="color:#75715e"># =&gt; `true`
</span><span style="color:#75715e"></span>        expr(<span style="color:#e6db74">\&#34;false\&#34;)</span> <span style="color:#75715e"># =&gt; `false`
</span><span style="color:#75715e"></span>
<span style="color:#e6db74">&lt;null&gt;</span> <span style="color:#e6db74">::=</span> <span style="color:#e6db74">&#34;null&#34;</span>
    <span style="color:#e6db74">null</span>
        <span style="color:#e6db74">expr(null</span>) <span style="color:#75715e"># =&gt; ``
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">NOT</span> <span style="color:#960050;background-color:#1e0010">null
</span><span style="color:#960050;background-color:#1e0010"></span>        expr(<span style="color:#e6db74">&#39;null&#39;</span>) <span style="color:#75715e"># =&gt; `null`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;literal&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;string&gt;|&lt;number&gt;|&lt;bool&gt;|&lt;null&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#960050;background-color:#1e0010">valid</span> <span style="color:#960050;background-color:#1e0010">literal
</span><span style="color:#960050;background-color:#1e0010"></span>        expr(<span style="color:#e6db74">&#34;hello world&#34;</span>) <span style="color:#75715e"># =&gt; `hello world`
</span><span style="color:#75715e"></span>        expr(<span style="color:#e6db74">123</span>) <span style="color:#75715e"># =&gt; `123`
</span><span style="color:#75715e"></span>        expr(<span style="color:#e6db74">&#39;123&#39;</span>) <span style="color:#75715e"># =&gt; `123`
</span><span style="color:#75715e"></span>        expr(<span style="color:#e6db74">true</span>) <span style="color:#75715e"># =&gt; `true`
</span><span style="color:#75715e"></span>        expr(<span style="color:#e6db74">null</span>) <span style="color:#75715e"># =&gt; ``
</span><span style="color:#75715e"></span>        expr(<span style="color:#e6db74">&#34;&#34;</span>) <span style="color:#75715e"># =&gt; ``
</span><span style="color:#75715e"></span>        expr(<span style="color:#e6db74">abc</span>) <span style="color:#75715e"># =&gt; `abc`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;list&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&#34;[&#34;</span> <span style="color:#960050;background-color:#1e0010">&lt;empty&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">(&lt;value&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;,&#34;)*</span> <span style="color:#960050;background-color:#1e0010">&lt;value&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;]&#34;
</span><span style="color:#960050;background-color:#1e0010"></span>    expr(<span style="color:#e6db74">&#34;[1,2,3,4]&#34;</span>) <span style="color:#75715e"># =&gt; `1;2;3;4`
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">&#34;[1]&#34;</span>) <span style="color:#75715e"># =&gt; `1`
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">&#34;[string_to_title(&#39;hello world&#39;), &#39;goodbye world&#39;::string_to_title()]&#34;</span>) <span style="color:#75715e"># =&gt; `Hello World;Goodbye World`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;key</span> <span style="color:#960050;background-color:#1e0010">value&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;value&gt;:&lt;value&gt;
</span><span style="color:#960050;background-color:#1e0010">&lt;object</span> <span style="color:#960050;background-color:#1e0010">property&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;key</span> <span style="color:#960050;background-color:#1e0010">value&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;value&gt;
</span><span style="color:#960050;background-color:#1e0010">&lt;object&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&#34;{&#34;</span> <span style="color:#960050;background-color:#1e0010">&lt;empty&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">(&lt;object</span> <span style="color:#960050;background-color:#1e0010">property&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;,&#34;)*</span> <span style="color:#960050;background-color:#1e0010">&lt;object</span> <span style="color:#960050;background-color:#1e0010">property&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;}&#34;
</span><span style="color:#960050;background-color:#1e0010"></span>    expr(<span style="color:#e6db74">{}</span>) <span style="color:#75715e"># =&gt; {} 
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">{a:b}</span>) <span style="color:#75715e"># =&gt; {&#34;a&#34;:&#34;b&#34;} 
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">{a:</span> (<span style="color:#e6db74">&#34;hello world&#34;</span><span style="color:#e6db74">::string_to_title(</span>))<span style="color:#960050;background-color:#1e0010">})</span> <span style="color:#75715e"># =&gt; {&#34;a&#34;:&#34;Hello World&#34;} 
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;paren&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&#34;(&#34;</span> <span style="color:#960050;background-color:#1e0010">&lt;value&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;)&#34;
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## ellipsis are treated differently in many situation
</span><span style="color:#75715e">## if used in a function parameter the arguments will be spread out
</span><span style="color:#75715e">## if used in a navigation or indexation expression the navigation or
</span><span style="color:#75715e">## indexation applied to every element in value
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">&lt;ellipsis&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;value&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;...&#34;</span> <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## if lvalue is &lt;null&gt; it is set to the default value (a new map)
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">&lt;default</span> <span style="color:#960050;background-color:#1e0010">value&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;lvalue&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;!&#34;</span> <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;value&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;paren&gt;</span> <span style="color:#960050;background-color:#1e0010">|
</span><span style="color:#960050;background-color:#1e0010"></span>            <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;value</span> <span style="color:#960050;background-color:#1e0010">dereference&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>            <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;value</span> <span style="color:#960050;background-color:#1e0010">reference&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>            <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;ellipsis&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>            <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;literal&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>            <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;interpolation&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>            <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;bind</span> <span style="color:#960050;background-color:#1e0010">call&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>            <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;call&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>            <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;list&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>            <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;object&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>            <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;scope</span> <span style="color:#960050;background-color:#1e0010">variable&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>            <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;indexation&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>            <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;navigation&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>            <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;paren&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>            <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;default</span> <span style="color:#960050;background-color:#1e0010">value&gt;
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## a parameter can be a value or the returnvalue operator &#34;$&#34;
</span><span style="color:#75715e">## if the return value operator is specified the output of that parameter
</span><span style="color:#75715e">## is treated as the result of the function call 
</span><span style="color:#75715e">## this is usefull for using function which do not adhere to the
</span><span style="color:#75715e">## return value convention. If used multiple times inside a call
</span><span style="color:#75715e">## the results are accumulated.   
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">&lt;parameter&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;value&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&#34;$&#34;</span> <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;parameters&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&#34;(&#34;</span> <span style="color:#960050;background-color:#1e0010">&lt;empty&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">(&lt;parameter&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;,&#34;</span> <span style="color:#960050;background-color:#1e0010">)*</span> <span style="color:#960050;background-color:#1e0010">&lt;parameter&gt;</span>  <span style="color:#960050;background-color:#1e0010">&#34;)&#34;
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;normal</span> <span style="color:#960050;background-color:#1e0010">call&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;value&gt;</span> <span style="color:#960050;background-color:#1e0010">&lt;parameters&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>    expr(<span style="color:#e6db74">string_to_title(</span><span style="color:#e6db74">&#34;hello world&#34;</span>)<span style="color:#960050;background-color:#1e0010">)</span> <span style="color:#75715e"># =&gt; `Hello World` 
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">&#34;eval_math(&#39;3 + 4&#39;)&#34;</span>) <span style="color:#75715e"># =&gt; `7`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">## bind call binds the left hand value as the first parameter of the function
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">&lt;bind</span> <span style="color:#960050;background-color:#1e0010">call&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span>  <span style="color:#960050;background-color:#1e0010">&lt;value&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;::&#34;</span> <span style="color:#960050;background-color:#1e0010">&lt;value&gt;</span> <span style="color:#960050;background-color:#1e0010">&lt;parameter&gt;</span>  <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    expr(<span style="color:#e6db74">&#34;hello world&#34;</span><span style="color:#e6db74">::string_to_title(</span>)<span style="color:#960050;background-color:#1e0010">)</span> <span style="color:#75715e"># =&gt; `Hello World` 
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;call&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;normal</span> <span style="color:#960050;background-color:#1e0010">call&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;bind</span> <span style="color:#960050;background-color:#1e0010">call&gt;
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;scope</span> <span style="color:#960050;background-color:#1e0010">variable&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&#34;$&#34;</span> <span style="color:#960050;background-color:#1e0010">&lt;literal&gt;</span> <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    set(<span style="color:#e6db74">my_var</span> <span style="color:#e6db74">hello!</span>) <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    expr(<span style="color:#960050;background-color:#1e0010">$</span><span style="color:#e6db74">my_var</span>) <span style="color:#75715e"># =&gt; `hello!` 
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;index&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&#34;-&#34;?</span> <span style="color:#960050;background-color:#1e0010">&lt;number&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&#34;$&#34;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&#34;n&#34;
</span><span style="color:#960050;background-color:#1e0010">&lt;increment&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&#34;-&#34;?</span> <span style="color:#960050;background-color:#1e0010">&lt;number&gt;
</span><span style="color:#960050;background-color:#1e0010">&lt;range&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;empty&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;index&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;index&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;:&#34;</span> <span style="color:#960050;background-color:#1e0010">&lt;index&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;index&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;:&#34;</span> <span style="color:#960050;background-color:#1e0010">&lt;index&gt;</span> <span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#960050;background-color:#1e0010">&lt;increment&gt;
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;indexation</span> <span style="color:#960050;background-color:#1e0010">parameter&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;range&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;value&gt;
</span><span style="color:#960050;background-color:#1e0010">&lt;indexation</span> <span style="color:#960050;background-color:#1e0010">parameters&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">(&lt;indexation</span> <span style="color:#960050;background-color:#1e0010">parameter&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;,&#34;)*</span> <span style="color:#960050;background-color:#1e0010">&lt;indexation</span> <span style="color:#960050;background-color:#1e0010">parameter&gt;
</span><span style="color:#960050;background-color:#1e0010">&lt;indexation&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;value&gt;&#34;[&#34;</span> <span style="color:#960050;background-color:#1e0010">&lt;indexation</span> <span style="color:#960050;background-color:#1e0010">parameters&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;]&#34;
</span><span style="color:#960050;background-color:#1e0010"></span>    expr(<span style="color:#e6db74">&#34;{a:1,b:2}[&#39;a&#39;,&#39;b&#39;]&#34;</span>) <span style="color:#75715e"># =&gt; `1;2` 
</span><span style="color:#75715e"></span>    expr(<span style="color:#e6db74">&#34;[{a:1,b:2},{a:3,b:4}]...[&#39;a&#39;,&#39;b&#39;]&#34;</span>) <span style="color:#75715e"># =&gt; `1;3;2;4`
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;lvalue&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;scope</span> <span style="color:#960050;background-color:#1e0010">variable&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;navigation&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;indexation&gt;</span> <span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;assign&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;lvalue&gt;</span> <span style="color:#960050;background-color:#1e0010">&#34;=&#34;</span> <span style="color:#960050;background-color:#1e0010">&lt;value&gt;
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e">## sets the scope variable my_value to 1
</span><span style="color:#75715e"></span>    expr(<span style="color:#960050;background-color:#1e0010">$</span><span style="color:#e6db74">my_value</span> <span style="color:#e6db74">=</span> <span style="color:#e6db74">1</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    expr(<span style="color:#960050;background-color:#1e0010">$</span><span style="color:#e6db74">my_value</span>) <span style="color:#75715e"># =&gt; `1` 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">## coerces the scope value my_other_value to be an object
</span><span style="color:#75715e"></span>    <span style="color:#75715e">#expr($my_other_value!.a!.b = 123)
</span><span style="color:#75715e"></span>    <span style="color:#75715e">#expr($my_other_value) # =&gt; `` 
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">&lt;expression&gt;</span> <span style="color:#960050;background-color:#1e0010">::=</span> <span style="color:#960050;background-color:#1e0010">&lt;assign&gt;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#960050;background-color:#1e0010">&lt;value&gt;</span> <span style="color:#960050;background-color:#1e0010">
</span></code></pre></div><h2 id="caveats">Caveats</h2>
<h3 id="syntax">Syntax</h3>
<p>The syntax is not implemented completely yet (missing return value token $). There are some conflicts in operation precedence (which can currently be solved with parenthesis). All Examples described here work however.</p>
<h3 id="speed">Speed</h3>
<p>Compiling these expressions is slow: a simple expression compiles in hundreds of milliseconds. Complex expressions can take several seconds. However this is only when they are first encountered. afterwards the speed is fast even if the expressions are complex. Currently I cache the expressions everytime cmake starts. An example is when using arguments_expression(&hellip;) It takes up to 1000ms to compile</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmake" data-lang="cmake">my_other_test_function(
    <span style="color:#e6db74">[a,eval_math(&#39;3*5&#39;</span>)<span style="color:#960050;background-color:#1e0010">,c],
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#960050;background-color:#1e0010">[d,e]...,
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#960050;background-color:#1e0010">var_2:</span> <span style="color:#960050;background-color:#1e0010">&#34;hello</span> <span style="color:#960050;background-color:#1e0010">world&#34;</span> <span style="color:#960050;background-color:#1e0010">,
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#960050;background-color:#1e0010">f,[g,h],
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#960050;background-color:#1e0010">var_4:</span> <span style="color:#960050;background-color:#1e0010">&#34;another</span> <span style="color:#960050;background-color:#1e0010">value&#34;
</span><span style="color:#960050;background-color:#1e0010">)
</span></code></pre></div><p>however execution time is less than 10 ms</p>
<h2 id="future-work">Future Work</h2>
<h3 id="syntax-1">Syntax</h3>
<p>I still need to implement correct math in the expressions which is a big minus in cmake (anyone who every had to work with negative values knows what I mean). Expressions like (-$a + 33) / -12 should be simple enough to get to work.</p>
<p>The return token $ needs to work. currently I do not support it.</p>
<p>Range based get and set needs to be implemented.</p>
<h1 id="let-a--babbbcbd">let a = [{b:&lsquo;a&rsquo;},{b:&lsquo;b&rsquo;},{b:&lsquo;c&rsquo;},{b:&rsquo;d'}]</h1>
<h1 id="then">then</h1>
<p>$a[1:2].b = [1,2]&hellip;</p>
<h2 id="should-result-in">should result in</h2>
<h1 id="let-a--bab1b2bd">let a = [{b:&lsquo;a&rsquo;},{b:&lsquo;1&rsquo;},{b:&lsquo;2&rsquo;},{b:&rsquo;d'}]</h1>
<h3 id="speed-1">Speed</h3>
<p>I still need to cache expressions between cmake runs which will decrease the time needed by alot (as expressions only need to be reevaluated whenever it changes)</p>
<h3 id="afterwards">Afterwards</h3>
<p>When the syntax is complete and this feature works well the next step is to incorporate it into CMake using C code which will significantly increase the speed. This will make everything much, much faster and might even get rid of those hideous generator expressions.</p>


                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/csharpparsingwebassetfiles/" data-toggle="tooltip" data-placement="top" title="A Quick Way of Parsing versioned Web Asset Files">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                </ul>

                
<div id="disqus-comment"></div>



<script src="https://utteranc.es/client.js"
repo="toeb/devblog"
issue-term="pathname"
label="comment"
theme="github-light"
crossorigin="anonymous"
async>
</script>





            </div>
            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                    </div>
                </section>
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                   <li>
                       <a href='' rel="alternate" type="application/rss+xml" title="toeb&#39;s Blog" >
                           <span class="fa-stack fa-lg">
                               <i class="fa fa-circle fa-stack-2x"></i>
                               <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
                   
                    
                    <li>
                        <a href="mailto:redacted@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    

                    

		    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/toeb">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/tobias-becker-a64475a3/">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    <li>
                        <a target="_blank" href="https://stackoverflow.com/users/1229468/toeb">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
            
                    
                    <li>
                        <a target="_blank" href="https://www.reddit.com/user/toebi">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-reddit fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
            
                    
                    
            
            
            
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; toeb&#39;s Blog 2021
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    async("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>






</body>
</html>
