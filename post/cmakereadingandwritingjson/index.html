<!DOCTYPE html>
<html lang="en-us">
<head>
    

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-177198277-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-177198277-1');
    </script>


    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="toeb&#39;s Blog">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://toeb.github.io//images/carbon.png">
    <meta property="twitter:image" content="https://toeb.github.io//images/carbon.png" />
    

    
    <meta name="title" content="cmakepp: Reading and Writing JSON" />
    <meta property="og:title" content="cmakepp: Reading and Writing JSON" />
    <meta property="twitter:title" content="cmakepp: Reading and Writing JSON" />
    

    
    <meta name="description" content="">
    <meta property="og:description" content="" />
    <meta property="twitter:description" content="" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="thetoeb, toeb, blog, programming">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>cmakepp: Reading and Writing JSON-Toeb Blog</title>

    <link rel="canonical" href="/post/cmakereadingandwritingjson/">

    <link rel="stylesheet" href="/css/iDisqus.min.css"/>
	
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">
    
    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    
    

    
    
    <script src="/js/jquery.min.js"></script>
    
    
    <script src="/js/bootstrap.min.js"></script>
    
    
    <script src="/js/hux-blog.min.js"></script>

    
    

</head>



<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">toeb&#39;s Blog</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                        
                        <li>
                            <a href="/categories/c">c#</a>
                        </li>
                        
                        <li>
                            <a href="/categories/c&#43;&#43;">c&#43;&#43;</a>
                        </li>
                        
                        <li>
                            <a href="/categories/cmake">cmake</a>
                        </li>
                        
                        <li>
                            <a href="/categories/frontend">frontend</a>
                        </li>
                        
                        <li>
                            <a href="/categories/obsolete">obsolete</a>
                        </li>
                        
                    
                    
		    
                        <li><a href="/top/about/">ABOUT</a></li>
                    

                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/images/carbon.png')
    }
</style>
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/cmake" title="cmake">
                            cmake
                        </a>
                        
                        <a class="tag" href="/tags/cmakepp" title="cmakepp">
                            cmakepp
                        </a>
                        
                    </div>
                    <h1>cmakepp: Reading and Writing JSON</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by 
                        
                                toeb&#39;s Blog
                         
                        on 
                        Wednesday, March 5, 2014
                        
                        
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                post-container">

                
                <p>While working on a package manager for CMake I came across the problem of finding a suitable format for my package descriptor files. First I thought about and tried using plain old CMake file that simply sets variables and can be included to access its contents. It was very quick and easy to implement. Hierarchical data structures however where hard to implement and a none standard format makes it harder to exchange data with a webservice/other programs. So I opted for using JSON as my import/export format. JSON is alot easier to parse than XML and is still ubiquitous in software developement so I cast aside XML (for now).</p>
<p>You can grab my implementation for reading and writing JSON with CMake at Github. Its part of my object oriented CMake library and uses my implementation for CMake maps and references.</p>
<p>Note: Because CMake only understands strings the deserializer only accepts string , array or object values. Also all keys and values have to be double quoted.</p>
<p>As always: feedback is most welcome if you feel like it you can tell me if you find it usefull, have ideas, or think that I have reinvented the wheel.</p>
<p>Here are some examples for serialization and deserialization:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmake" data-lang="cmake"><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># serialize empty value
</span><span style="color:#75715e"></span>json_serialize(<span style="color:#e6db74">res</span> <span style="color:#e6db74">&#34;&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">NOT</span> <span style="color:#e6db74">res</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># serialze simple value
</span><span style="color:#75715e"></span>json_serialize(<span style="color:#e6db74">res</span> <span style="color:#e6db74">&#34;hello!&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">res</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">&#34;\&#34;</span><span style="color:#e6db74">hello!\</span><span style="color:#e6db74">&#34;&#34;</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#f92672">${</span>res<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># serialize a cmake list value
</span><span style="color:#75715e"></span>json_serialize(<span style="color:#e6db74">res</span> <span style="color:#e6db74">&#34;a;b;c&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">res</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">EQUALS</span> <span style="color:#e6db74">&#34;\&#34;</span><span style="color:#e6db74">a\\\\;b\\\\;c\</span><span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">${</span>res<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">#empty object
</span><span style="color:#75715e"></span>element(<span style="color:#e6db74">uut</span> <span style="color:#e6db74">MAP</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>element(<span style="color:#e6db74">END</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>json_serialize(<span style="color:#e6db74">res</span> <span style="color:#f92672">${</span>uut<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">&#34;{}&#34;</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#f92672">${</span>res<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># empty list
</span><span style="color:#75715e"></span>element(<span style="color:#e6db74">uut</span> <span style="color:#e6db74">LIST</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>element(<span style="color:#e6db74">END</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>json_serialize(<span style="color:#e6db74">res</span> <span style="color:#f92672">${</span>uut<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">&#34;[]&#34;</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#f92672">${</span>res<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># ref
</span><span style="color:#75715e"></span>ref_new(<span style="color:#e6db74">uut</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>ref_set(<span style="color:#f92672">${</span>uut<span style="color:#f92672">}</span> <span style="color:#e6db74">&#34;a b c&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>json_serialize(<span style="color:#e6db74">res</span> <span style="color:#f92672">${</span>uut<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">&#34;\&#34;</span><span style="color:#e6db74">a</span> <span style="color:#e6db74">b</span> <span style="color:#e6db74">c\</span><span style="color:#e6db74">&#34;&#34;</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#f92672">${</span>res<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># list with one element
</span><span style="color:#75715e"></span>element(<span style="color:#e6db74">uut</span> <span style="color:#e6db74">LIST</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>value(<span style="color:#e6db74">1</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>element(<span style="color:#e6db74">END</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>json_serialize(<span style="color:#e6db74">res</span> <span style="color:#f92672">${</span>uut<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">&#34;[\&#34;</span><span style="color:#e6db74">1\</span><span style="color:#e6db74">&#34;]&#34;</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#f92672">${</span>res<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># list with multiple elements element
</span><span style="color:#75715e"></span>element(<span style="color:#e6db74">uut</span> <span style="color:#e6db74">LIST</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>value(<span style="color:#e6db74">1</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>value(<span style="color:#e6db74">2</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>element(<span style="color:#e6db74">END</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>json_serialize(<span style="color:#e6db74">res</span> <span style="color:#f92672">${</span>uut<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">&#34;[\&#34;</span><span style="color:#e6db74">1\</span><span style="color:#e6db74">&#34;,\&#34;</span><span style="color:#e6db74">2\</span><span style="color:#e6db74">&#34;]&#34;</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#f92672">${</span>res<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># object with single value
</span><span style="color:#75715e"></span>element(<span style="color:#e6db74">uut</span> <span style="color:#e6db74">MAP</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>value(<span style="color:#e6db74">KEY</span> <span style="color:#e6db74">k1</span> <span style="color:#e6db74">val1</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>element(<span style="color:#e6db74">END</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>json_serialize(<span style="color:#e6db74">res</span> <span style="color:#f92672">${</span>uut<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">&#34;{\&#34;</span><span style="color:#e6db74">k1\</span><span style="color:#e6db74">&#34;:\&#34;</span><span style="color:#e6db74">val1\</span><span style="color:#e6db74">&#34;}&#34;</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#f92672">${</span>res<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># object with multiple value
</span><span style="color:#75715e"></span>element(<span style="color:#e6db74">uut</span> <span style="color:#e6db74">MAP</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>value(<span style="color:#e6db74">KEY</span> <span style="color:#e6db74">k1</span> <span style="color:#e6db74">val1</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>value(<span style="color:#e6db74">KEY</span> <span style="color:#e6db74">k2</span> <span style="color:#e6db74">val2</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>element(<span style="color:#e6db74">END</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>json_serialize(<span style="color:#e6db74">res</span> <span style="color:#f92672">${</span>uut<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">&#34;{\&#34;</span><span style="color:#e6db74">k1\</span><span style="color:#e6db74">&#34;:\&#34;</span><span style="color:#e6db74">val1\</span><span style="color:#e6db74">&#34;,\&#34;</span><span style="color:#e6db74">k2\</span><span style="color:#e6db74">&#34;:\&#34;</span><span style="color:#e6db74">val2\</span><span style="color:#e6db74">&#34;}&#34;</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#f92672">${</span>res<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># list with single map
</span><span style="color:#75715e"></span>element(<span style="color:#e6db74">uut</span> <span style="color:#e6db74">LIST</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>element()<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>value(<span style="color:#e6db74">KEY</span> <span style="color:#e6db74">k1</span> <span style="color:#e6db74">1</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>element(<span style="color:#e6db74">END</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>element(<span style="color:#e6db74">END</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>json_serialize(<span style="color:#e6db74">res</span> <span style="color:#f92672">${</span>uut<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">&#34;[{\&#34;</span><span style="color:#e6db74">k1\</span><span style="color:#e6db74">&#34;:\&#34;</span><span style="color:#e6db74">1\</span><span style="color:#e6db74">&#34;}]&#34;</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#f92672">${</span>res<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># deserialize a empty value
</span><span style="color:#75715e"></span>json_deserialize(<span style="color:#e6db74">res</span> <span style="color:#e6db74">&#34;&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">NOT</span> <span style="color:#e6db74">res</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># deserialize a empty object
</span><span style="color:#75715e"></span>json_deserialize(<span style="color:#e6db74">res</span> <span style="color:#e6db74">&#34;{}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">res</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>ref_isvalid( <span style="color:#f92672">${</span>res<span style="color:#f92672">}</span>  <span style="color:#e6db74">is_ref</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">is_ref</span> <span style="color:#e6db74">MESSAGE</span> <span style="color:#e6db74">&#34;expected res to be a ref&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># desirialize a empty array
</span><span style="color:#75715e"></span>json_deserialize(<span style="color:#e6db74">res</span> <span style="color:#e6db74">&#34;[]&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">res</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>ref_isvalid( <span style="color:#f92672">${</span>res<span style="color:#f92672">}</span> <span style="color:#e6db74">is_ref</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#e6db74">is_ref</span> <span style="color:#e6db74">MESSAGE</span> <span style="color:#e6db74">&#34;expected res to be a ref&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># deserialize a simple value
</span><span style="color:#75715e"></span>json_deserialize(<span style="color:#e6db74">res</span> <span style="color:#e6db74">&#34;\&#34;</span><span style="color:#e6db74">teststring\</span><span style="color:#e6db74">&#34;&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#f92672">${</span>res<span style="color:#f92672">}</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#e6db74">&#34;teststring&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># deserialize a array with one value
</span><span style="color:#75715e"></span>json_deserialize(<span style="color:#e6db74">res</span> <span style="color:#e6db74">&#34;[\&#34;</span><span style="color:#e6db74">1\</span><span style="color:#e6db74">&#34;]&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>map_navigate(<span style="color:#e6db74">val</span> <span style="color:#e6db74">&#34;res[0]&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#f92672">${</span>val<span style="color:#f92672">}</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#e6db74">&#34;1&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">#deserialize a array with multiple values
</span><span style="color:#75715e"></span>json_deserialize(<span style="color:#e6db74">res</span> <span style="color:#e6db74">&#34;[\&#34;</span><span style="color:#e6db74">1\</span><span style="color:#e6db74">&#34;, \&#34;</span><span style="color:#e6db74">2\</span><span style="color:#e6db74">&#34;]&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>map_navigate(<span style="color:#e6db74">val</span> <span style="color:#e6db74">&#34;res[0]&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#f92672">${</span>val<span style="color:#f92672">}</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#e6db74">&#34;1&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>map_navigate(<span style="color:#e6db74">val</span> <span style="color:#e6db74">&#34;res[1]&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#f92672">${</span>val<span style="color:#f92672">}</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#e6db74">&#34;2&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># deserialize a simple object with one value
</span><span style="color:#75715e"></span>json_deserialize(<span style="color:#e6db74">res</span> <span style="color:#e6db74">&#34;{ \&#34;</span><span style="color:#e6db74">key\</span><span style="color:#e6db74">&#34; : \&#34;</span><span style="color:#e6db74">value\</span><span style="color:#e6db74">&#34;}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>map_navigate(<span style="color:#e6db74">val</span> <span style="color:#e6db74">&#34;res.key&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#f92672">${</span>val<span style="color:#f92672">}</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#e6db74">&#34;value&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># deserialize a simple object with multiple values
</span><span style="color:#75715e"></span>json_deserialize(<span style="color:#e6db74">res</span> <span style="color:#e6db74">&#34;{ \&#34;</span><span style="color:#e6db74">key\</span><span style="color:#e6db74">&#34; : \&#34;</span><span style="color:#e6db74">value\</span><span style="color:#e6db74">&#34;, \&#34;</span><span style="color:#e6db74">key2\</span><span style="color:#e6db74">&#34; : \&#34;</span><span style="color:#e6db74">val2\</span><span style="color:#e6db74">&#34;}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>map_navigate(<span style="color:#e6db74">val</span> <span style="color:#e6db74">&#34;res.key&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#f92672">${</span>val<span style="color:#f92672">}</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#e6db74">&#34;value&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>map_navigate(<span style="color:#e6db74">val</span> <span style="color:#e6db74">&#34;res.key2&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#f92672">${</span>val<span style="color:#f92672">}</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#e6db74">&#34;val2&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># deserialize a simple nested structure
</span><span style="color:#75715e"></span>json_deserialize(<span style="color:#e6db74">res</span> <span style="color:#e6db74">&#34;{ \&#34;</span><span style="color:#e6db74">key\</span><span style="color:#e6db74">&#34; : {\&#34;</span><span style="color:#e6db74">key3\</span><span style="color:#e6db74">&#34;:\&#34;</span><span style="color:#e6db74">myvalue\</span><span style="color:#e6db74">&#34; }, \&#34;</span><span style="color:#e6db74">key2\</span><span style="color:#e6db74">&#34; : \&#34;</span><span style="color:#e6db74">val2\</span><span style="color:#e6db74">&#34;}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>map_navigate(<span style="color:#e6db74">val</span> <span style="color:#e6db74">&#34;res.key2&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#f92672">${</span>val<span style="color:#f92672">}</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#e6db74">&#34;val2&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>map_navigate(<span style="color:#e6db74">val</span> <span style="color:#e6db74">&#34;res.key.key3&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#f92672">${</span>val<span style="color:#f92672">}</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#e6db74">&#34;myvalue&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># deserialize a nested structure containing both arrays and objects
</span><span style="color:#75715e"></span>json_deserialize(<span style="color:#e6db74">res</span> <span style="color:#e6db74">&#34;{ \&#34;</span><span style="color:#e6db74">key\</span><span style="color:#e6db74">&#34; : [\&#34;</span><span style="color:#e6db74">1\</span><span style="color:#e6db74">&#34;, \&#34;</span><span style="color:#e6db74">2\</span><span style="color:#e6db74">&#34;], \&#34;</span><span style="color:#e6db74">key2\</span><span style="color:#e6db74">&#34; : \&#34;</span><span style="color:#e6db74">val2\</span><span style="color:#e6db74">&#34;}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>map_navigate(<span style="color:#e6db74">val</span> <span style="color:#e6db74">&#34;res.key2&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#f92672">${</span>val<span style="color:#f92672">}</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#e6db74">&#34;val2&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>map_navigate(<span style="color:#e6db74">val</span> <span style="color:#e6db74">&#34;res.key[0]&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#f92672">${</span>val<span style="color:#f92672">}</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#e6db74">&#34;1&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>map_navigate(<span style="color:#e6db74">val</span> <span style="color:#e6db74">&#34;res.key[1]&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#f92672">${</span>val<span style="color:#f92672">}</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#e6db74">&#34;2&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># deserialize a &#39;deeply&#39; nested structure and get a value
</span><span style="color:#75715e"></span>json_deserialize(<span style="color:#e6db74">res</span> <span style="color:#e6db74">&#34;{ \&#34;</span><span style="color:#e6db74">key\</span><span style="color:#e6db74">&#34; : [{\&#34;</span><span style="color:#e6db74">k1\</span><span style="color:#e6db74">&#34;:\&#34;</span><span style="color:#e6db74">v1\</span><span style="color:#e6db74">&#34;}, \&#34;</span><span style="color:#e6db74">2\</span><span style="color:#e6db74">&#34;], \&#34;</span><span style="color:#e6db74">key2\</span><span style="color:#e6db74">&#34; : \&#34;</span><span style="color:#e6db74">val2\</span><span style="color:#e6db74">&#34;}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>map_navigate(<span style="color:#e6db74">val</span> <span style="color:#e6db74">&#34;res.key[0].k1&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>assert(<span style="color:#f92672">${</span>val<span style="color:#f92672">}</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#e6db74">&#34;v1&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></code></pre></div>

                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/objectorientedcmakenextiteration/" data-toggle="tooltip" data-placement="top" title="Object Oriented CMake: Next Iteration">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/cppiscallabletypetrait/" data-toggle="tooltip" data-placement="top" title="`is_callable` type trait">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>

                
<div id="disqus-comment"></div>



<script src="https://utteranc.es/client.js"
repo="toeb/devblog"
issue-term="pathname"
label="comment"
theme="github-light"
crossorigin="anonymous"
async>
</script>





            </div>
            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/c&#43;&#43;" title="c&#43;&#43;">
                            c&#43;&#43;
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/cmake" title="cmake">
                            cmake
                        </a>
                        
                        
                        
                        <a href="/tags/cmakepp" title="cmakepp">
                            cmakepp
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                    </div>
                </section>
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                   <li>
                       <a href='' rel="alternate" type="application/rss+xml" title="toeb&#39;s Blog" >
                           <span class="fa-stack fa-lg">
                               <i class="fa fa-circle fa-stack-2x"></i>
                               <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
                   
                    
                    <li>
                        <a href="mailto:redacted@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    

                    

		    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/toeb">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/tobias-becker-a64475a3/">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    <li>
                        <a target="_blank" href="https://stackoverflow.com/users/1229468/toeb">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
            
                    
                    <li>
                        <a target="_blank" href="https://www.reddit.com/user/toebi">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-reddit fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
            
                    
                    
            
            
            
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; toeb&#39;s Blog 2021
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    async("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>






</body>
</html>
